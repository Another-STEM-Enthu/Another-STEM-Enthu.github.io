<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Varad's Blogs</title>
  <link rel="stylesheet" href="blogs.css">
</head>
<body>
<div class="slider-container">
  <label class="switch">
    <input type="checkbox" id="modeToggle">
    <span class="slider"></span>
  </label>
</div>
  <!-- Sitemap at top -->
  <div id="sitemap">
      <a href="index.html"><button class="btn"><span>Home</span></button></a>
      <a href="blogs.html"><button class="btn"><span>Posts</span></button></a>
      <!-- <a href="#about"><button class="btn"><span>About</span></button></a> -->
  </div>

  <header style="margin-top: var(--sitemap-height, 12vh);">
    <b>ðŸ“š Blogs</b>
  </header>

  <main class="container" style="margin-top: var(--sitemap-height, 8vh);">
    <aside id="blog-list" class="glass">
      <h1>All Posts</h1>
      <ul id="blogs"></ul>
    </aside>

    <section id="blog-content" class="glass">
      <div class="placeholder">
        <h2>Welcome!</h2>
        <p>Select a blog from the list to start reading.</p>
      </div>
    </section>
  </main>

<div style="text-align: right; color: white;"><br><br><br>Version 0.0<br>I am somewhat HTML literate.</div>
<div id="visitor-counter" style="
     position: fixed; 
     top: 1vh; 
     right: 2vw; 
     padding: 0.5em 1em; 
     background-color: rgba(0,0,0,0.3); 
     color: rgb(0,128,0); 
     font-weight: bold; 
     border: 2px solid rgb(0,128,0); 
     border-radius: 0.8vw;
     font-size: 1.2em;
     z-index: 1000;">
  Visitors: <span id="count">0</span>
</div>


<script src="blogs.js" defer></script>

<script>
const toggle = document.getElementById('modeToggle');
const blogList = document.getElementById("blog-list");
const blogContent = document.getElementById("blog-content");

window.addEventListener('DOMContentLoaded', () => {
  const state = localStorage.getItem('modeToggleState');
  if (state === 'true') {
    toggle.checked = true;
  } else {
    toggle.checked = false;
  }
document.body.classList.toggle('dark', toggle.checked);
blogList.style.backgroundColor= toggle.checked ? "rgba(0, 0, 0, 0.15)" : "rgba(255, 255, 255, 0.35)";
blogContent.style.backgroundColor= toggle.checked ? "rgba(0, 0, 0, 0.15)" : "rgba(255, 255, 255, 0.35)";
blogList.style.color= toggle.checked ? "rgba(255, 255, 255)" : "rgba(0, 0, 0)";
blogContent.style.color= toggle.checked ? "rgba(255, 255, 255)" : "rgba(0, 0, 0)";
});
toggle.addEventListener('change', () => {
localStorage.setItem('modeToggleState', toggle.checked);
document.body.classList.toggle('dark', toggle.checked);
blogList.style.backgroundColor= toggle.checked ? "rgba(0, 0, 0, 0.15)" : "rgba(255, 255, 255, 0.35)";
blogContent.style.backgroundColor= toggle.checked ? "rgba(0, 0, 0, 0.15)" : "rgba(255, 255, 255, 0.35)";
blogList.style.color= toggle.checked ? "rgba(255, 255, 255)" : "rgba(0, 0, 0)";
blogContent.style.color= toggle.checked ? "rgba(255, 255, 255)" : "rgba(0, 0, 0)";

});

</script>





<script>
// Replace with your CounterAPI namespace and key
const COUNTER_URL = "https://api.counterapi.dev/api/varadblog/varadblogcounter";

// A unique flag for this site so it doesn't increment again on reload
const STORAGE_KEY = "visitorCounted";

async function updateCounter() {
  const counterEl = document.getElementById("visitor-counter");

  try {
    // If user already visited in this browser, just fetch count (no increment)
    if (localStorage.getItem(STORAGE_KEY)) {
      const res = await fetch(COUNTER_URL);
      const data = await res.json();
      counterEl.textContent = `Visitors: ${data.count}`;
    } else {
      // First visit in this browser â†’ increment
      const res = await fetch(`${COUNTER_URL}/up`, { method: "POST" });
      const data = await res.json();
      counterEl.textContent = `Visitors: ${data.count}`;
      localStorage.setItem(STORAGE_KEY, "true");
    }
  } catch (err) {
    counterEl.textContent = "Error loading counter";
    console.error(err);
  }
}

// Run on page load
updateCounter();
</script>

<!-- <script>
const namespace = "varad-page";
const key = "visitors";
const url = `https://counterapi.dev/api/${namespace}/${key}`;

async function updateCounter() {
  // Only increment if first time in this browser
  if (!localStorage.getItem("visited")) {
    const res = await fetch(`${url}/increment`);
    const data = await res.json();
    document.getElementById("count").textContent = data.value;
    localStorage.setItem("visited", "true");
  } else {
    const res = await fetch(url);
    const data = await res.json();
    document.getElementById("count").textContent = data.value;
  }
}

updateCounter();
</script> -->


</body>
</html>
